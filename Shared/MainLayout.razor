@inject NavigationManager NavigationManager
@inherits LayoutComponentBase
@inject IAuthenticationService AuthenticationService

<div>
   @if(isAuthenticated)
   {
      <div class="main-cnt" style="height:100vh; width:100%;">
         <NovaLaundryAppWebAdminBlazor.Pages.Components.menu.SidebarMenu />

         <div class="main-elements">
            <NovaLaundryAppWebAdminBlazor.Pages.Components.menu.HeaderMenu />

            @Body
         </div>
      </div>
   }
   else {
      <NovaLaundryAppWebAdminBlazor.Pages.Login />
   }
</div>

@code 
{
   private bool isAuthenticated = false;

   protected override async Task OnAfterRenderAsync(bool firstRender)
   {
      if(firstRender) 
      {
         // Check if the user is authenticated
         isAuthenticated = await AuthenticationService.IsAuthenticatedAsync();
         StateHasChanged();
      }
   }
}